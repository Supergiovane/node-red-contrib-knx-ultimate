üåê Language: [EN](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/Gateway-configuration) | [IT](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Gateway-configuration) | [DE](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/de-Gateway-configuration) | [FR](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/fr-Gateway-configuration) | [ES](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/es-Gateway-configuration) | [ÁÆÄ‰Ωì‰∏≠Êñá](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/zh-CN-Gateway-configuration)

<!-- NAV START -->
Navigazione: [Home](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Home)  
Panoramica: [Changelog](https://github.com/Supergiovane/node-red-contrib-knx-ultimate/blob/master/CHANGELOG.md) ‚Ä¢ [FAQ](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-FAQ-Troubleshoot) ‚Ä¢ [Sicurezza](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-SECURITY) ‚Ä¢ [Docs: Barra lingue](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Docs-Language-Bar)  
Nodo KNX Dispositivo: [Gateway](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Gateway-configuration) ‚Ä¢ [Dispositivo](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Device) ‚Ä¢ [Protezioni](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Protections)  
Altri Nodi KNX: [Scene Controller](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-SceneController-Configuration) ‚Ä¢ [WatchDog](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-WatchDog-Configuration) ‚Ä¢ [Logger](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Logger-Configuration) ‚Ä¢ [Global Context](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-GlobalVariable) ‚Ä¢ [Alerter](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Alerter-Configuration) ‚Ä¢ [Controllo Carico](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-LoadControl-Configuration) ‚Ä¢ [Viewer](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-knxUltimateViewer) ‚Ä¢ [Auto Responder](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-KNXAutoResponder) ‚Ä¢ [Traduttore HA](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HATranslator) ‚Ä¢ [IoT Bridge](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-IoT-Bridge-Configuration)  
HUE: [Bridge](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Bridge%20configuration) ‚Ä¢ [Luce](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Light) ‚Ä¢ [Batteria](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Battery) ‚Ä¢ [Pulsante](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Button) ‚Ä¢ [Contatto](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Contact%20sensor) ‚Ä¢ [Aggiornamento SW](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Device%20software%20update) ‚Ä¢ [Sensore Luce](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Light%20sensor) ‚Ä¢ [Movimento](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Motion) ‚Ä¢ [Scena](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Scene) ‚Ä¢ [Tap Dial](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Tapdial) ‚Ä¢ [Temperatura](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Temperature%20sensor) ‚Ä¢ [Connettivit√† Zigbee](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Zigbee%20connectivity)  
Esempi: [Logger](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Logger-Sample) ‚Ä¢ [Switch Light](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Switch-light) ‚Ä¢ [Dimming](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Dimming) ‚Ä¢ [RGB color](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---RGB-Color) ‚Ä¢ [RGBW color + White](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---RGBW-Color-plus-White) ‚Ä¢ [Command a scene actuator](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Control-a-scene-actuator) ‚Ä¢ [Datapoint 213.x 4x Setpoint](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT213) ‚Ä¢ [Datapoint 222.x 3x Setpoint](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT222) ‚Ä¢ [Datapoint 237.x DALI diags](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT237) ‚Ä¢ [Datapoint 2.x 1 bit proprity](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT2) ‚Ä¢ [Datapoint 22.x RCHH Status](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT22) ‚Ä¢ [Datetime to BUS](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DateTime-to-BUS) ‚Ä¢ [Read Status](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Read-value-from-Device) ‚Ä¢ [Virtual Device](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Virtual-Device) ‚Ä¢ [Subtype decoded](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Subtype) ‚Ä¢ [Alexa](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Alexa) ‚Ä¢ [Apple Homekit](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Apple-Homekit) ‚Ä¢ [Google Home](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Google-Assistant) ‚Ä¢ [Switch on/off POE port of Unifi switch](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---UnifiPOE) ‚Ä¢ [Set configuration by msg](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample-setConfig) ‚Ä¢ [Scene Controller node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/Sample-Scene-Node) ‚Ä¢ [WatchDog node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---WatchDog) ‚Ä¢ [Global Context node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SampleGlobalContextNode) ‚Ä¢ [Alerter node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SampleAlerter) ‚Ä¢ [Load control node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SampleLoadControl) ‚Ä¢ [Viewer node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/knxUltimateViewer) ‚Ä¢ [MySQL, InfluxDB, MQTT Sample](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/Sample-KNX2MQTT-KNX2MySQL-KNX2InfluxDB)
<!-- NAV END -->

# Configurazione del KNX Gateway

Questo nodo si connette al tuo KNX/IP Gateway.

**Generale**

|Propriet√†|Descrizione|
|--|--|
| Nome | Nome del nodo. |
| IP/Hostname | Indirizzo multicast dell'ETH/KNX Router o indirizzo IP unicast dell'interfaccia. Con una KNX/IP Interface usa l'IP dell'interfaccia (es. 192.168.1.22). Con un KNX/IP Router usa l'indirizzo multicast `224.0.23.12`. Puoi inserire anche un **Hostname** . |

**Configurazione**

|Propriet√†|Descrizione|
|--|--|
| IP Port | Porta di connessione. Default: `3671`. |
| IP Protocol | `Tunnel UDP` per interfacce KNX/IP, `Multicast UDP` per router KNX/IP. Lascia **Auto** per l'autorilevamento (default). |
| KNX Physical Address | Indirizzo fisico KNX, es. `1.1.200`. Default: `15.15.22`. |
| Bind to local interface | Interfaccia di rete locale usata dal nodo. Lascia "Auto" per selezione automatica. Se hai pi√π interfacce (Ethernet/Wi‚ÄëFi), √® consigliato impostarla manualmente per evitare perdita di telegrammi UDP. Default: "Auto". |
| Automatically connect to KNX BUS at start | Connessione automatica al BUS all'avvio. Default: "Yes". |
| Secure credentials source | Scegli come fornire i dati KNX Secure: **File keyring ETS ** (le chiavi Data Secure e, se presenti, le credenziali di tunnelling arrivano dal keyring),**Credenziali manuali ** (solo KNX IP Tunnelling Secure con utente inserito a mano) oppure**File keyring + password tunnel manuale** (chiavi Data Secure dal keyring, utente/password del tunnel impostati manualmente). Ricorda: i telegrammi KNX Data Secure richiedono sempre un file keyring. |
| Tunnel interface individual address | Visibile quando la modalit√† selezionata prevede credenziali manuali (Credenziali manuali o File keyring + password tunnel manuale). Indirizzo individuale opzionale dell'interfaccia tunnel sicura (es. `1.1.1`); lascia vuoto per negoziazione automatica da parte di KNX Ultimate. |
| Tunnel user ID | Visibile quando sono attive credenziali manuali. ID opzionale dell'utente tunnel KNX Secure definito in ETS. |
| Tunnel user password | Visibile quando sono attive credenziali manuali. Password dell'utente tunnel KNX Secure configurata in ETS. |

> **Nota su KNX Secure** \
> ‚Ä¢ _KNX Data Secure_ protegge i telegrammi sugli indirizzi di gruppo e richiede sempre un file keyring con le chiavi di gruppo.\
> ‚Ä¢ _KNX IP Tunnelling Secure_ protegge l'handshake della connessione tramite una password di commissioning, che pu√≤ essere letta dal keyring oppure inserita manualmente in base alla modalit√† scelta.

**Avanzate**

|Propriet√†|Descrizione|
|--|--|
| Echo sent message to all node with same Group Address | Inoltra ai nodi con lo stesso GA i msg inviati dal flow, come se provenissero dal BUS. Utile in emulazione KNX o senza connessione al BUS. **Opzione in deprecazione e presto abilitata di default.** Default: abilitato. |
| Suppress repeated (R-Flag) telegrams fom BUS | Ignora i telegrammi ripetuti (flag R) dal BUS. Default: disabilitato. |
| Suppress ACK request in tunneling mode | Per vecchie interfacce KNX/IP: ignora l'ACK e accetta tutti i telegrammi. Default: disabilitato. |
| Delay between each telegram (ms) | Lo standard KNX prevede max 50 telegrammi/s. Un intervallo 25-50ms √® adeguato. Con gateway remoto su link lento aumenta (es. 200-500ms). |
| Loglevel | Livello di log per il debug. Default: "Error". |
| Limitazione aggiornamento stato nodi | Imposta ogni quanto aggiornare il badge di stato dei nodi. Con un ritardo attivo gli stati intermedi vengono ignorati e viene mostrato solo l'ultimo dopo l'intervallo scelto. Seleziona **Immediato** per mantenere l'aggiornamento in tempo reale. |

**Import file ETS**

|Propriet√†|Descrizione|
|--|--|
| If Group Address has no Datapoint | Se un GA non ha datapoint: interrompi import, salta il GA o aggiungi un datapoint fittizio `1.001` e continua. |
| ETS group address list | Incolla qui il contenuto del file ETS (CSV o ESF) oppure indica un percorso file (es. `/home/pi/mycsv.csv`). Consulta i link di help per i dettagli. |

**Utility**

|Propriet√†|Descrizione|
|--|--|
| Gather debug info for troubleshoot | Clicca il pulsante e allega l'output alla issue su GitHub: aiuta molto l'analisi. |
| Get all used GA for KNX routing filter | Clicca READ per ottenere l'elenco di tutti i GA usati nei flow associati a questo gateway, utile per popolare la tabella filtri del tuo KNX/IP Router. |

# Lavorare con i file ETS CSV o ESF

Invece di creare un nodo per ogni GA da controllare, puoi importare il file ETS di indirizzi di gruppo in formato CSV (consigliato) o ESF (da v1.1.35, utile con ETS Inside). ETS supportata: v4+.

Da v1.4.18 puoi anche indicare direttamente il percorso al file nel campo (es.: `/home/pi/mycsv.csv`).

Con **Universal mode (listen to all Group Addresses)** il nodo diventa I/O universale, consapevole di Datapoint, GA e nomi dispositivi. Invia un `payload` al nodo e lui codifica col DPT corretto; viceversa, decodifica i telegrammi in arrivo usando il DPT dell'ETS.

Da v1.1.11 puoi usare la modalit√† universale anche senza file ETS: invia al nodo un messaggio con tipo DPT e valore. Alla ricezione da BUS, il nodo emette anche il RAW e prova a decodificare senza DPT.

Nota: il file CSV contiene DPT precisi con sottotipo; l'ESF √® pi√π semplice e non include il sottotipo. Se puoi, preferisci il CSV: l'ESF pu√≤ generare valori errati; controlla e correggi eventuali DPT dopo l'import. Da v1.4.1 √® possibile importare anche a runtime via msg (nodo WatchDog).

Video: <a href="https://youtu.be/egRbR_KwP9I"><img src='https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/yt.png'></a>

- **Import ETS CSV Group Addresses ** ATTENZIONE: nel nome del GA non devono esserci caratteri di tabulazione.**If Group Address has no Datapoint ** > Se in ETS un GA non ha DPT, puoi: interrompere l'import, saltare il GA, oppure aggiungere il GA con DPT fittizio e continuare.**Come esportare l'elenco GA in formato CSV da ETS**

> In ETS seleziona l'elenco GA, click destro ‚Üí Esporta indirizzi di gruppo. Nella finestra di export imposta:

> Output Format: CSV

> CSV Format: 1/1 Name/Address

> Export with header line: spuntato

> CSV Separator: Tabulator

> Poi incolla qui il contenuto del file.

> Il file deve contenere i Datapoint per ogni GA. Il nodo analizza il file e mostra risultati nel DEBUG di Node‚ÄëRED.

> Esiti possibili: **ERROR ** (manca DPT ‚Üí import interrotto) e**WARNING** (manca sottotipo ‚Üí aggiunto default, ma va verificato). Il sottotipo √® il numero dopo il punto, es. `5.001`.

> I campi devono essere racchiusi tra virgolette `"`.

**Come esportare l'elenco GA in formato ESF da ETS**

> In ETS seleziona il progetto, icona export (freccia in su), scegli formato ESF (non `.knxprod`). Copia e incolla nel campo "ETS group address list" del gateway.

    <table style="font-size:12px">
        <tr><th colspan="2" style="font-size:14px">Significato colori stato nodo</th></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/greendot.png"></td><td>Reagisci a telegrammi di scrittura</td></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/greenring.png"></td><td>Protezione da riferimenti circolari (<a href="https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki" target="_blank">vedi pagina</a>)</td></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/bluedot.png"></td><td>Reagisci a telegrammi di risposta</td></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/bluering.png"></td><td>Invio automatico del valore del nodo come risposta al BUS (<a href="https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Virtual-Device" target="_blank">Virtual Device</a>)</td></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/greudot.png"></td><td>Reagisci a telegrammi di lettura</td></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/greyring.png"></td><td>Filtro RBE: nessun telegramma √® stato inviato</td></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/reddot.png"></td><td>Errore o disconnesso</td></tr>
        <tr><td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/redring.png"></td><td>Nodo DISABILITATO per riferimento circolare (<a href="https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki" target="_blank">vedi pagina</a>)</td></tr>
    </table>
