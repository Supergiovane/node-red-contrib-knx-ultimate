üåê Language: [EN](/node-red-contrib-knx-ultimate/wiki/Device) | [IT](/node-red-contrib-knx-ultimate/wiki/it-Device) | [DE](/node-red-contrib-knx-ultimate/wiki/de-Device) | [FR](/node-red-contrib-knx-ultimate/wiki/fr-Device) | [ES](/node-red-contrib-knx-ultimate/wiki/es-Device) | [ÁÆÄ‰Ωì‰∏≠Êñá](/node-red-contrib-knx-ultimate/wiki/zh-CN-Device)
<!-- NAV START -->
Navigation: [Home](/node-red-contrib-knx-ultimate/wiki/Home) 
Overview: [Changelog](https://github.com/Supergiovane/node-red-contrib-knx-ultimate/blob/master/CHANGELOG.md) ‚Ä¢ [FAQ](/node-red-contrib-knx-ultimate/wiki/FAQ-Troubleshoot) ‚Ä¢ [Security](/node-red-contrib-knx-ultimate/wiki/SECURITY) ‚Ä¢ [Docs: Language bar](/node-red-contrib-knx-ultimate/wiki/Docs-Language-Bar) 
KNX Device: [Gateway](/node-red-contrib-knx-ultimate/wiki/Gateway-configuration) ‚Ä¢ [Device](/node-red-contrib-knx-ultimate/wiki/Device) ‚Ä¢ [Protections](/node-red-contrib-knx-ultimate/wiki/Protections) 
Other KNX Nodes: [Scene Controller](/node-red-contrib-knx-ultimate/wiki/SceneController-Configuration) ‚Ä¢ [WatchDog](/node-red-contrib-knx-ultimate/wiki/WatchDog-Configuration) ‚Ä¢ [Logger](/node-red-contrib-knx-ultimate/wiki/Logger-Configuration) ‚Ä¢ [Global Context](/node-red-contrib-knx-ultimate/wiki/GlobalVariable) ‚Ä¢ [Alerter](/node-red-contrib-knx-ultimate/wiki/Alerter-Configuration) ‚Ä¢ [Load Control](/node-red-contrib-knx-ultimate/wiki/LoadControl-Configuration) ‚Ä¢ [Viewer](/node-red-contrib-knx-ultimate/wiki/knxUltimateViewer) ‚Ä¢ [Auto Responder](/node-red-contrib-knx-ultimate/wiki/KNXAutoResponder) ‚Ä¢ [HA Translator](/node-red-contrib-knx-ultimate/wiki/HATranslator) ‚Ä¢ [IoT Bridge](/node-red-contrib-knx-ultimate/wiki/IoT-Bridge-Configuration) 
HUE: [Bridge](/node-red-contrib-knx-ultimate/wiki/HUE+Bridge+configuration) ‚Ä¢ [Light](/node-red-contrib-knx-ultimate/wiki/HUE+Light) ‚Ä¢ [Battery](/node-red-contrib-knx-ultimate/wiki/HUE+Battery) ‚Ä¢ [Button](/node-red-contrib-knx-ultimate/wiki/HUE+Button) ‚Ä¢ [Contact](/node-red-contrib-knx-ultimate/wiki/HUE+Contact+sensor) ‚Ä¢ [Device SW update](/node-red-contrib-knx-ultimate/wiki/HUE+Device+software+update) ‚Ä¢ [Light sensor](/node-red-contrib-knx-ultimate/wiki/HUE+Light+sensor) ‚Ä¢ [Motion](/node-red-contrib-knx-ultimate/wiki/HUE+Motion) ‚Ä¢ [Scene](/node-red-contrib-knx-ultimate/wiki/HUE+Scene) ‚Ä¢ [Tap Dial](/node-red-contrib-knx-ultimate/wiki/HUE+Tapdial) ‚Ä¢ [Temperature](/node-red-contrib-knx-ultimate/wiki/HUE+Temperature+sensor) ‚Ä¢ [Zigbee connectivity](/node-red-contrib-knx-ultimate/wiki/HUE+Zigbee+connectivity) 
Samples: [Logger](/node-red-contrib-knx-ultimate/wiki/Logger-Sample) ‚Ä¢ [Switch Light](/node-red-contrib-knx-ultimate/wiki/-Sample---Switch-light) ‚Ä¢ [Dimming](/node-red-contrib-knx-ultimate/wiki/-Sample---Dimming) ‚Ä¢ [RGB color](/node-red-contrib-knx-ultimate/wiki/-Sample---RGB-Color) ‚Ä¢ [RGBW color + White](/node-red-contrib-knx-ultimate/wiki/-Sample---RGBW-Color-plus-White) ‚Ä¢ [Command a scene actuator](/node-red-contrib-knx-ultimate/wiki/-Sample---Control-a-scene-actuator) ‚Ä¢ [Datapoint 213.x 4x Setpoint](/node-red-contrib-knx-ultimate/wiki/-Sample---DPT213) ‚Ä¢ [Datapoint 222.x 3x Setpoint](/node-red-contrib-knx-ultimate/wiki/-Sample---DPT222) ‚Ä¢ [Datapoint 237.x DALI diags](/node-red-contrib-knx-ultimate/wiki/-Sample---DPT237) ‚Ä¢ [Datapoint 2.x 1 bit proprity](/node-red-contrib-knx-ultimate/wiki/-Sample---DPT2) ‚Ä¢ [Datapoint 22.x RCHH Status](/node-red-contrib-knx-ultimate/wiki/-Sample---DPT22) ‚Ä¢ [Datetime to BUS](/node-red-contrib-knx-ultimate/wiki/-Sample---DateTime-to-BUS) ‚Ä¢ [Read Status](/node-red-contrib-knx-ultimate/wiki/-Sample---Read-value-from-Device) ‚Ä¢ [Virtual Device](/node-red-contrib-knx-ultimate/wiki/-Sample---Virtual-Device) ‚Ä¢ [Subtype decoded](/node-red-contrib-knx-ultimate/wiki/-Sample---Subtype) ‚Ä¢ [Alexa](/node-red-contrib-knx-ultimate/wiki/-Sample---Alexa) ‚Ä¢ [Apple Homekit](/node-red-contrib-knx-ultimate/wiki/-Sample---Apple-Homekit) ‚Ä¢ [Google Home](/node-red-contrib-knx-ultimate/wiki/-Sample---Google-Assistant) ‚Ä¢ [Switch on/off POE port of Unifi switch](/node-red-contrib-knx-ultimate/wiki/-Sample---UnifiPOE) ‚Ä¢ [Set configuration by msg](/node-red-contrib-knx-ultimate/wiki/-Sample-setConfig) ‚Ä¢ [Scene Controller node](/node-red-contrib-knx-ultimate/wiki/Sample-Scene-Node) ‚Ä¢ [WatchDog node](/node-red-contrib-knx-ultimate/wiki/-Sample---WatchDog) ‚Ä¢ [Global Context node](/node-red-contrib-knx-ultimate/wiki/SampleGlobalContextNode) ‚Ä¢ [Alerter node](/node-red-contrib-knx-ultimate/wiki/SampleAlerter) ‚Ä¢ [Load control node](/node-red-contrib-knx-ultimate/wiki/SampleLoadControl) ‚Ä¢ [Viewer node](/node-red-contrib-knx-ultimate/wiki/knxUltimateViewer) ‚Ä¢ [MySQL, InfluxDB, MQTT Sample](/node-red-contrib-knx-ultimate/wiki/Sample-KNX2MQTT-KNX2MySQL-KNX2InfluxDB) 
Contribute to Wiki: [Link](/node-red-contrib-knx-ultimate/wiki/Manage-Wiki)
<!-- NAV END -->
---
## Param√®tres de n≈ìud de p√©riph√©rique KNX-ultimate

 Ce n≈ìud vous permet de contr√¥ler une adresse de groupe KNX, c'est le n≈ìud le plus utilis√©.

[<i class="fa fa-code"> </i> Ici, vous trouverez quelques √©chantillons](/node-red-contrib-knx-ultimate/wiki/-Sampleshome)

**Configuration**

| Propri√©t√© | Description |
|-|-|
| Passerelle | S√©lectionnez la passerelle KNX √† utiliser |
| Liste d√©roulante de type GA | Le type d'adresse de groupe. **3 niveaux** est la valeur par d√©faut, o√π vous pouvez saisir l'adresse du groupe de niveau _3 ou le nom d'adresse _group (si vous avez t√©l√©charg√© le fichier ETS), ou **global**, pour lire le GA au d√©marrage √† partir d'une variable globale, ou **flux** qui font la m√™me chose que le _Global_, mais au niveau du flux. S√©lectionnez **$ Env Variable** Pour lire l'adresse de groupe √† partir d'une variable d'environnement. S√©lectionnez **Mode universel (√©coutez toutes les adresses de groupe)** pour r√©agir √† toutes les adresses de groupe. |
| Groupe addr. | L'adresse du groupe KNX que vous souhaitez contr√¥ler. Si vous avez import√© le fichier d'adresses du groupe ETS, vous pouvez simplement commencer √† saisir le nom de votre appareil. Vous pouvez le laisser vide si vous souhaitez le d√©finir avec le message d'entr√©e _msg.setConfig_. |
| DataPoint | Le point de donn√©es appartenant √† votre n≈ìud. |

### Bouton de commande manuelle

L‚Äô√©diteur peut afficher, pour chaque n≈ìud, un petit bouton permettant d‚Äôenvoyer un t√©l√©gramme KNX sans ajouter de n≈ìud Inject suppl√©mentaire.

| Propri√©t√© | Description |
|--|--|
| Afficher le bouton manuel | Affiche ou masque le bouton dans l‚Äôespace de travail et dans la palette de n≈ìuds. |
| Action du bouton | D√©finit l‚Äôop√©ration effectu√©e au clic. **Envoyer une lecture KNX** envoie un t√©l√©gramme de lecture standard. **Basculer le bool√©en (√©criture)** est disponible pour les datapoints 1.x et alterne les valeurs _true_/_false_. **√âcrire une valeur personnalis√©e** envoie la valeur saisie (elle doit √™tre compatible avec le datapoint configur√©). |
| √âtat initial du basculement | (Datapoints bool√©ens uniquement) D√©finit la valeur initiale utilis√©e par le mode bascule. L‚Äô√©tat est automatiquement synchronis√© avec les t√©l√©grammes re√ßus du BUS. |
| Valeur personnalis√©e | Payload utilis√© par le mode ¬´ √âcrire une valeur personnalis√©e ¬ª. Vous pouvez saisir n‚Äôimporte quel litt√©ral JSON, par exemple `42`, `true`, `"texte"` ou `{ "red": 255 }`. |

Le bouton n‚Äôest visible que si l‚Äôoption est activ√©e. En mode universel, l‚Äôaction de lecture est d√©sactiv√©e car l‚Äôadresse de groupe ne serait pas connue.

## OPP OPTIONS AVANCES

| Propri√©t√© | Description |
|-|-|
|| **Propri√©t√©s g√©n√©rales** |
| Nom du n≈ìud | Explication de soi. |
| Sujet | Le sujet de sortie MSG. Laissez-le vide pour le faire r√©gler sur l'adresse de votre groupe. |
| Passthrough | Si vous √™tes d√©fini, vous pouvez passer les MG d'entr√©e au msg de sortie. |
|| **De la broche d'entr√©e du n≈ìud au bus KNX** |
| Type de t√©l√©gramme | _WRITE_ Pour envoyer un t√©l√©gramme d'√©criture (g√©n√©ralement, vous le souhaitez), sinon vous pouvez choisir le type du t√©l√©gramme auquel r√©agir. |
| Filtre RBE | _Report par filtre change_. S'il est d√©fini, seule l'entr√©e MSG (du d√©bit) ayant des valeurs diff√©rentes √† chaque fois, sera envoy√©e au bus KNX. Si vous avez l'intention d'envoyer √† chaque fois la m√™me valeur, √©teignez-la. Si vous √™tes activ√©, l'indication "RBE" sera ajout√©e au nom du n≈ìud. |
|| **De KNX BUS √† la broche ouput de Node** |
| Lire l'√©tat au d√©but | Lisez l'√©tat de l'adresse du groupe, chaque fois que le Node-Red d√©marre et √† chaque reconnexion √† la passerelle KNX. Le n≈ìud stocke toutes les valeurs d'adresse de groupe dans un fichier, afin que vous puissiez choisir wether √† lire dans le fichier ou dans le bus KNX. |
| Filtre RBE | _Report par filtre change_. S'il est d√©fini, seule la sortie MSG (dans le bus KNX) ayant des valeurs diff√©rentes √† chaque fois, sera envoy√©e au flux de la sortie MSG. Si vous avez l'intention d'envoyer √† chaque fois la m√™me valeur, laissez-la √©teindre. Si vous √™tes activ√©, l'indication "RBE" sera ajout√©e au nom du n≈ìud. |
| R√©agir aux t√©l√©grammes d'√©criture | Le n≈ìud r√©agira (enverra un msg au flux) chaque fois qu'il re√ßoit un t√©l√©gramme _Write_ du bus KNX. Habituellement, vous voulez cela. |
| R√©agir aux t√©l√©grammes de r√©ponse | Le n≈ìud r√©agira (enverra un msg au flux) chaque fois qu'il re√ßoit un t√©l√©gramme _Response_ du bus KNX. Habituellement, vous voulez cela pour des sc√©narios particuliers. |
| R√©agir aux t√©l√©grammes de lecture | Le n≈ìud r√©agira (enverra un msg au flux) chaque fois qu'il re√ßoit un t√©l√©gramme _read_ du bus KNX. Habituellement, vous voulez cela si vous souhaitez envoyer une valeur personnalis√©e au bus KNX. |
| Multiplier | Multiplie ou divise la valeur de charge utile. Ne fonctionne que si la valeur est un nombre. |
| D√©cimales | Des d√©cimales rondes ou manipul√©es de quelque mani√®re que ce soit. Ne fonctionne que si la valeur est un nombre. |
| N√©gatifs | G√®re les valeurs n√©gatives. Ne fonctionne que si la valeur est un nombre. |

Fonction ## Tab KNX

Vous pouvez utiliser JavaScript pour modifier le comportement du msg d'entr√©e provenant du flux et du t√©l√©gramme de sortie envoy√© au bus KNX. \
L'√©diteur de code int√©gr√© fournit des objets et des fonctions utiles pour r√©cup√©rer la valeur de toutes les adresses de groupe, √† la fois avec le fichier ETS import√© et sans (sp√©cifiant le point de donn√©es). \
Le script s'appelle √† chaque fois que le n≈ìud re√ßoit un msg du flux ou un t√©l√©gramme du bus KNX. \
S'il est activ√©, l'indication "f (x)" sera ajout√©e au nom du n≈ìud.

| Propri√©t√© | Description |
|-|-|
| Recherche GA | C'est un assistant uniquement si le fichier ETS a √©t√© import√©. Commencez √† taper et s√©lectionnez l'adresse de groupe que vous souhaitez ajouter au code. Copiez ensuite le champ complet et collez-le dans la fonction GetGavalue. **getGavalue ('0/0/1 Table Nord Lamp')** |

### Liste d'objets et de fonctions communes que vous pouvez utiliser dans le code

| Objet ou fonction | Description |
|-|-|
| msg (objet) | L'objet MSG actuel re√ßu par le n≈ìud. |
| getGavalue (String GA, String facultatif DPT) | Obtenez la valeur de GA sp√©cifi√©e, par exemple **'1/0/1'**, ou aussi **'1/0/1 light light'** (tout le texte apr√®s un espace vierge sera ignor√© par la fonction. Ceci est utile si vous souhaitez ajouter le nom GA et un rappel. Avec le fichier ETS import√©, vous pouvez √©galement copier et coller le nom GA et GA directement dans le champ **Recherche GA**. **DPT** est facultatif si vous avez import√© le fichier ETS, sinon vous devez le sp√©cifier, par exemple ¬´1.001¬ª. |
| setGavalue (String ga, n'importe quelle valeur, cha√Æne facultative dpt) | D√©finissez la valeur de GA sp√©cifi√©e. Le GA Con doit √™tre √©crit par exemple **'1/0/1'**, ou aussi **'1/0/1 light light'** (tout le texte apr√®s un espace vide sera ignor√© par la fonction. Ceci est utile si vous souhaitez ajouter le nom GA et un rappel. Avec le fichier ETS import√©, vous pouvez √©galement copier et coller le nom GA et GA directement √† partir du champ GA **GA**.). La valeur ** **est obligatoire, peut √™tre un bool√©en ou un num√©ro ou une cha√Æne,** dpt **est facultatif si vous avez import√© le fichier ETS, sinon vous devez le sp√©cifier, par exemple ¬´1.001¬ª. |
| self (toute valeur) | D√©finissez la valeur du n≈ìud Currend et envoie √©galement la valeur au bus KNX. Par exemple, _self (false) _. ATTENTION UTILISATION** Self **Fonction dans le code Pin_ de sortie du bus KNX _From pour le n≈ìud, car le code sera ex√©cut√© √† chaque fois qu'un t√©l√©gramme KNX est re√ßu, vous avez donc Coud ayant des boucles de r√©currence. |
| basculer (rien) | Basculez la valeur du n≈ìud Currend et envoie √©galement la valeur au bus KNX. Par exemple, _toggle () _. ATTENTION en utilisant** Toggle **Fonction dans le code Pin_ de sortie du bus KNX _From √† la sortie du n≈ìud, car le code sera ex√©cut√© √† chaque fois qu'un t√©l√©gramme KNX est re√ßu, de sorte que vous avez des boucles de r√©currence. |
| Node (objet) | L'objet n≈ìud. |
| Red (objet Node-Red) | L'objet rouge du n≈ìud-rouge. |
| return (msg) | `Retour MSG obligatoire;`, si vous souhaitez √©mettre le message. Sinon, l'utilisation de `retour; 'n'√©mettra aucun message. |

### du bus KNX √† la broche de sortie du n≈ìud

Dans cet √©chantillon, nous enverrons le msg d'entr√©e au bus KNX uniquement si un autre GA a une valeur oppos√©e. \
Nous allons allumer la lumi√®re uniquement si son statut GA est √©teint, et vice versa.

```javascript
const statusGA = getGAValue('0/0/09','1.001');
if (msg.payload !== statusGA){ // "!==" means "not equal"
 return msg;
}else{
 // Both values are identical, so i don't send the msg.
 return;
}
```

Ici, si quelqu'un allume la lumi√®re, nous allumons une autre lumi√®re 0/1/8 et apr√®s 2 secondes, nous √©teignons la lampe connect√©e au n≈ìud.

```javascript
if (msg.payload){ 
 setGAValue('0/1/8',true)
 setTimeout(function() {
 self(off);
 }, 2000);
}
return msg;
```

### De KNX Bus √† la broche ouput de Node

Dans cet √©chantillon, nous √©mettons l'objet MSG √† l'√©coulement, en ajoutant la valeur d'un autre GA √† la sortie msg. \
Le msg ouput au flux aura √©galement la temp√©rature externe dans la propri√©t√© ¬´msg.externaltemperature¬ª

```javascript
// The current msg contains the internal temperature in the "msg.payload" property, but we want to emit the external temperature as well.
msg.externalTemperature = getGAValue('0/0/10'); // In case the ETS file is missing, you must specify the dpt as well: getGAValue('0/0/10','9.001')
return msg;
```

Dans cet autre √©chantillon, nous n'√©mettons pas de msg au flux, au cas o√π msg.payload et une autre valeur GA sont tous deux faux.

```javascript
if (msg.payload === false && getGAValue('0/0/11','1.001') === false){
 // Both false, don't emit the msg to the flow.
 return;
}else{
 // Ok, emit it.
 return msg;
}
```

## onglet √âchantillon de charge utile

| Propri√©t√© | Description |
|-|-|
| √âchantillon | Cela lui donnera un indice sur ce qu'il faut √©crire dans un n≈ìud de fonction externe, si vous souhaitez contr√¥ler le n≈ìud via un n≈ìud de fonction Node-Red. |

### entr√©es** destination (cha√Æne) **: l'adresse du groupe de destination, par exemple 1/1/0. Seul le niveau 3 est autoris√©.** charge utile (any) **: La charge utile √† envoyer. Peut √™tre par exemple vrai ou faux, ou un objet.** √âv√©nement (cha√Æne) **: Peut √™tre _GroupValue \ _Write_ pour √©crire le t√©l√©gramme dans le bus KNX, _GroupValue \ _Response_ pour envoyer un t√©l√©gramme de r√©ponse au bus KNX, _update \ _nowrite_. _Update \ _nowrite_ envoie des rien au bus KNX, met √† jour la valeur interne du n≈ìud KNX-ultime. Ceci est utile si vous voulez seulement stocker la valeur dans le n≈ìud et le lire plus tard avec une demande de lecture.** readStatus (boolean) **: √©mettez une demande de lecture au bus KNX. Passer _true_ √† chaque fois (msg.readstatus = true).** DPT (String) **: Par exemple "1.001". D√©finit le point de donn√©es.** Writeraw (tampon) **: est utilis√© pour envoyer une valeur au bus KNX, en tant que tampon. Utilisez en conjonction avec _Bitlenght_.** bitlenght (int) **: Sp√©cifie le long du tampon _writeraw_. Utilisez en conjonction avec _WriteRaw_.** restrbe (boolean) **: r√©initialise les filtres RBE internes (_USE msg.resetrbe = true_).** SetConfig (JSON) **: Modifiez par programme l'adresse de groupe de n≈ìuds de p√©riph√©rique KNX-ultimate et DataPoint. Voir les d√©tails.

### D√©tails

`msg.setConfig`: Il est possible de modifier par programme la configuration du n≈ìud KNX-ultime, en envoyant l'objet msg.setConfig au n≈ìud.
La nouvelle configuration sera conserv√©e jusqu'au prochain msg.setconfig ou jusqu'√† red√©marrage / red√©ployer.
Toutes les propri√©t√©s (_setGroupAddress_ et _setDpt_)** sont obligatoires **.. \
Utilisez-le comme √ßa, dans un n≈ìud Functon:** D√©finissez GA et DPT **```javascript
// Change the node properties as follows:
// setGroupAddress: set the new group address.
// setDPT: set the new Datapoint, as you can see in the dropdown list (the numeric part, for example "1.001", "237.600", etc...). If set to** auto **, the datapoint will be read from the ETS file (if present).
var config= {
 setGroupAddress: "0/1/2",
 setDPT: "1.001"
};
msg.setConfig = config;
return msg;
```** D√©finissez GA et lisez le point de donn√©es √† partir du fichier ETS **```javascript
// Change the node properties as follows:
// setGroupAddress: set the new group address.
// setDPT: set the new Datapoint, as you can see in the dropdown list (the numeric part, for example "1.001", "237.600", etc...). If set to "auto", the datapoint will be read from the ETS file (if present).
var config= {
 setGroupAddress: "0/1/2",
 setDPT: "auto"
};
msg.setConfig = config;
return msg;
```

### sorties

1. Sortie standard
 : charge utile (cha√Æne | num√©ro | objet) \ *\*: la broche 1 est la sortie standard de la commande.

2. Erreurs
 : erreur (objet) \ *\*: PIN 2 contient le message d'erreur d√©taill√©.

### D√©tails

`msg.payload` est utilis√© comme charge utile de l'adresse du groupe (la valeur d'adresse du groupe).
Il s'agit plut√¥t d'un exemple de l'objet MSG complet.

```json
msg = {
 topic: "0/1/2" // (Contains the node's topic, for example "MyTopic". If the node's topic is not set, contains the Group Address, for example "0/1/2")
 payload: false 
 previouspayload: true // Previous node payload value.
 payloadmeasureunit: "%" // Payload's measure unit.
 payloadsubtypevalue: "Start" // Subtype's decoded value, for exampe, On/Off, Ramp/NoRamp, Start/Stop, Alarm/NoAlarm
 devicename: "Dinning table lamp" // If the node is in **universal mode**, it contains the full path (main, middle,name) of the group address name, otherwise, the node name.
 gainfo: { // Contains the details about the group address name and number. This object is only present if the node is set in **universal mode** and with the **ETS file** been imported. If something wrong, it contains the string **unknown**.
 maingroupname:"Light actuators"
 middlegroupname:"First flow lights"
 ganame:"Table Light"
 maingroupnumber:"1"
 middlegroupnumber:"1"
 ganumber:"0"
 },
 echoed:true, // True if the msg is coming from the input PIN, otherwise false if the msg is coming form the KNX BUS.
 knx: { // This is a representation of the KNX BUS telegram, coming from BUS
 event: "GroupValue_Write" // (or "GroupValue_Response", or "GroupValue_Read")
 dpt: "1.001"
 dptdesc: "Humidity" // Payload's measure unit description
 source: "15.15.22"
 destination: "0/1/2" // Contains the Group Address
 rawValue: buffer[1]raw // (or null, if "GroupValue_Read")
 0: 0x0 // (This is the RAW undecoded value)
 }
}
``` **Exemple de charge utile** | Propri√©t√© | Description |

|-|-|
| √âchantillon | Cela lui donnera un indice sur ce qu'il faut √©crire dans un n≈ìud de fonction externe, si vous souhaitez contr√¥ler le n≈ìud via un n≈ìud de fonction Node-Red. |

### entr√©es

: destination (cha√Æne) \ *\*: l'adresse du groupe de destination, par exemple le 1/1/0. Seul le niveau 3 est autoris√©. \
: charge utile (any) \ *\*: la charge utile √† envoyer. Peut √™tre par exemple vrai ou faux, ou un objet.
: √©v√©nement (String) \ *\*: peut √™tre _GroupValue \ _Write_ pour √©crire le t√©l√©gramme dans le bus KNX, _GroupValue \ _Response_ pour envoyer un t√©l√©gramme de r√©ponse au bus KNX, _update \ _NowRite_. _Update \ _nowrite_ envoie des rien au bus KNX, met √† jour la valeur interne du n≈ìud KNX-ultime. Ceci est utile si vous voulez seulement stocker la valeur dans le n≈ìud et le lire plus tard avec une demande de lecture.
: ReadStatus (bool√©en) \ *\*: √©mettez une demande de lecture au bus KNX. Passer _true_ √† chaque fois (msg.readstatus = true).
: dpt (String) \ *\*: Par exemple "1.001". D√©finit le point de donn√©es.
: Writeraw (tampon): est utilis√© pour envoyer une valeur au bus KNX, en tant que tampon. Utilisez en conjonction avec _Bitlenght_.
: bitlenght (int): sp√©cifie le long du tampon _writeraw_. Utilisez en conjonction avec _WriteRaw_.
: ressetrbe (boolean) \ *\*: r√©initialise les filtres RBE internes (_USE msg.resetrbe = true_).
: setConfig (JSON) \ *\*: modifier par programme l'adresse de groupe de n≈ìuds de p√©riph√©rique KNX-ultimate et le point de donn√©es. Voir les d√©tails.

### D√©tails

`msg.setConfig`: Il est possible de modifier par programme la configuration du n≈ìud KNX-ultime, en envoyant l'objet msg.setConfig au n≈ìud.
La nouvelle configuration sera conserv√©e jusqu'au prochain msg.setconfig ou jusqu'√† red√©marrage / red√©ployer.
Toutes les propri√©t√©s (_setGroupAddress_ et _setDpt_) **sont obligatoires**.. \
Utilisez-le comme √ßa, dans un n≈ìud Functon: **D√©finissez GA et DPT** ```javascript
// Change the node properties as follows:
// setGroupAddress: set the new group address.
// setDPT: set the new Datapoint, as you can see in the dropdown list (the numeric part, for example "1.001", "237.600", etc...). If set to **auto**, the datapoint will be read from the ETS file (if present).
var config= {
 setGroupAddress: "0/1/2",
 setDPT: "1.001"
};
msg.setConfig = config;
return msg;
``` **D√©finissez GA et lisez le point de donn√©es √† partir du fichier ETS** ```javascript
// Change the node properties as follows:
// setGroupAddress: set the new group address.
// setDPT: set the new Datapoint, as you can see in the dropdown list (the numeric part, for example "1.001", "237.600", etc...). If set to "auto", the datapoint will be read from the ETS file (if present).
var config= {
 setGroupAddress: "0/1/2",
 setDPT: "auto"
};
msg.setConfig = config;
return msg;
```

### sorties

1. Sortie standard
 : charge utile (cha√Æne | num√©ro | objet) \ *\*: la broche 1 est la sortie standard de la commande.

2. Erreurs
 : erreur (objet) \ *\*: PIN 2 contient le message d'erreur d√©taill√©.

### D√©tails

`msg.payload` est utilis√© comme charge utile de l'adresse du groupe (la valeur d'adresse du groupe).
Il s'agit plut√¥t d'un exemple de l'objet MSG complet.

```json
msg = {
 topic: "0/1/2" // (Contains the node's topic, for example "MyTopic". If the node's topic is not set, contains the Group Address, for example "0/1/2")
 payload: false 
 previouspayload: true // Previous node payload value.
 payloadmeasureunit: "%" // Payload's measure unit.
 payloadsubtypevalue: "Start" // Subtype's decoded value, for exampe, On/Off, Ramp/NoRamp, Start/Stop, Alarm/NoAlarm
 devicename: "Dinning table lamp" // If the node is in **universal mode**, it contains the full path (main, middle,name) of the group address name, otherwise, the node name.
 gainfo: { // Contains the details about the group address name and number. This object is only present if the node is set in **universal mode** and with the **ETS file** been imported. If something wrong, it contains the string **unknown**.
 maingroupname:"Light actuators"
 middlegroupname:"First flow lights"
 ganame:"Table Light"
 maingroupnumber:"1"
 middlegroupnumber:"1"
 ganumber:"0"
 }
 knx: { // This is a representation of the KNX BUS telegram, coming from BUS
 event: "GroupValue_Write" // (or "GroupValue_Response", or "GroupValue_Read")
 dpt: "1.001"
 dptdesc: "Humidity" // Payload's measure unit description
 source: "15.15.22"
 destination: "0/1/2" // Contains the Group Address
 rawValue: buffer[1]raw // (or null, if "GroupValue_Read")
 0: 0x0 // (This is the RAW undecoded value)
 }
}
```

## Sortie du message de l'ensemble de n≈ìuds comme "Mode universel (√©coutez toutes les adresses de groupe)"

Ici, vous avez 2 options: Importer le fichier CVS ETS ou non. 

L'importation de votre fichier ETS est la m√©thode <b> Aboslute sugg√©r√©e </b>. Si vous importez votre fichier ETS, le n≈ìud fera automatiquement le d√©codage de points de donn√©es et vous donnera √©galement le nom de l'appareil. 

Si vous n'importez pas l'ETS, le n≈ìud sortira le t√©l√©gramme brut et il essaie √©galement de le d√©coder. 

```javascript

msg = {
 topic: "0/1/2" // (Contains the Group Address of the incoming telegram)
 payload: false // (Automatically decoded telegram. If you've <b>not imported the ETS file</b>, the node will try to decode the telegram <b>but you can obtain an erroneus value</b>)
 payloadmeasureunit: "%" // (payload's measure unit)
 payloadsubtypevalue: "Start" // (Subtype's decoded value, for exampe, On/Off, Ramp/NoRamp, Start/Stop, Alarm/NoAlarm.)
 devicename: "(First Floor->Dinning Room) Dinning table lamp" // (the node will output the complete path of your house, including the device name, or the node's name in case you've <b>not imported the ETS file</b> )) 
 knx: 
 event: "GroupValue_Write" // (or "GroupValue_Response", or "GroupValue_Read")
 dpt: "1.001" // (If you've <b>not imported the ETS file</b>, this represents the datapoint used to try to decode the telegram)
 dptdesc: "Humidity" // (payload's measure unit description)
 source: "15.15.22"
 destination: "0/1/2" // (Contains the Group Address of the incoming telegram, same as topic)
 rawValue: buffer[1]raw // (or null, if "GroupValue_Read")
 0: 0x0 // (This is the RAW undecoded value)
 }}
 
```

## Message de sortie dans l'appareil virtuel

Ici, vous trouverez un √©chantillon de [Virtual Device](/node-red-contrib-knx-ultimate/wiki/-sample---virtual-device)

```javascript

 {
 topic: '5/0/1',
 payload: true,
 devicename: 'Light Status',
 event: 'Update_NoWrite',
 eventdesc: "The value has been updated from another node and hasn't been received from KNX BUS",
 previouspayload: true
 }
 
```

---

# Message de flux d'entr√©e

## Contr√¥le des appareils KNX

Le n≈ìud accepte le MSG de l'√©coulement √† envoyer au bus KNX et envoie MSG au flux d√®s que le message KNX arrive du bus. 

En supposant que vous avez fourni une adresse de groupe et un point de donn√©es au n≈ìud, soit manuellement ou avec des champs de population automatique en s√©lectionnant votre appareil dans la liste de l'appareil apr√®s avoir import√© le fichier ETS. 

Vous pouvez √©galement remplacer un ou plusieurs param√®tres d√©finis dans la fen√™tre de configuration KNX-ultimate. 

Toutes les propri√©t√©s ci-dessous sont facultatives, √† l'exception de la charge utile. **msg.Destination** Par exemple, "0/0/1". D√©finissez l'adresse de groupe √† 3 niveaux que vous voulez mettre √† jour. **msg.payload** Par exemple, true / false / 21 / "Bonjour". D√©finissez la charge utile que vous souhaitez envoyer au bus KNX. **msg.event** "GroupValue \ _Write": √©crit le t√©l√©gramme au bus KNX. 

"GroupValue \ _Response": envoie un t√©l√©gramme de r√©ponse au bus KNX. 

"Update \ _Nowrite": envoie des rien au bus KNX, met √† jour la valeur interne du n≈ìud KNX-ultime. Ceci est utile si vous ne voulez stocker la valeur que dans le n≈ìud et le lire plus tard avec une demande de lecture. 

ATTENTION: Dans le cas de _msg.event = "Update \ _Nowrite" _ Tous les n≈ìuds avec la m√™me adresse de groupe √©mettra √† l'√©coulement un msg comme ceci:

```javascript

{
 topic: '5/0/1',
 payload: true,
 devicename: 'Light Status',
 event: 'Update_NoWrite',
 eventdesc: "The value has been updated from another node and hasn't been received from KNX BUS",
 previouspayload: true
}

```

Si vous souhaitez √©mettre une commande "lire", veuillez utiliser "ReadStatus" √† la place (voir ci-dessous). **msg.readstatus = true** √âmettez une commande "lire" au bus. **msg.dpt** Par exemple "1.001". D√©finit le <b> datapoint </b>. (Vous pouvez l'√©crire dans ces formats: 9, "9", "9.001" ou "DPT9.001") **msg.writeraw**  **msg.bitlenght** √âcrit des donn√©es brutes au bus KNX. Veuillez voir ci-dessous un exemple. **MSG.RESETRBE** PASS MSG.RESETRBE = VRAI √Ä un n≈ìud de p√©riph√©rique, pour r√©initialiser √† la fois l'entr√©e et la sortie du filtre RBE sur ce n≈ìud particulier. 

## modifier par programme la configuration du n≈ìud via MSG

Il est possible de modifier par programme la configuration du n≈ìud KNX-ultimate, en envoyant un objet msg.setConfig au n≈ìud. 

[Veuillez consulter ici l'exemple de page.](/node-red-contrib-knx-ultimate/wiki/-sample-setconfig)

# Quick comment faire

Vous pouvez plus d'√©chantillons [ici](/node-red-contrib-knx-ultimate/wiki/-sampleshome) **Allumez une lampe** ```javascript

// Example of a function that sends a message to the KNX-Ultimate
msg.payload = true; // issues a write or response (based on the options <b>Telegram type</b> above) to the KNX bus
return msg;

``` **Absolute dim a lampe** ```javascript

// Example of a function that sends a message to the KNX-Ultimate
msg.payload = 30; // issues a write or response (based on the options <b>Telegram type</b> above) to the KNX bus
return msg;

``` **Envoyer du texte √† un affichage** ```javascript

// Example of a function that sends a message to the KNX-Ultimate
msg.payload = "Output Tem. 35¬∞C"; // issues a write or response (based on the options <b>Telegram type</b> above) to the KNX bus
return msg;

``` **Lisez l'√©tat de la machine √† laver** ```javascript

// Example of a function that sends a read status message to the KNX-Ultimate
// Issues a read request to the KNX bus. You'll expect a 'response' from the bus. You need to select the **React to response telegrams** option.
// The node will react to the KNX Response telegram coming from the BUS.
msg.readstatus = true; // issues a write or response (based on the options <b>Telegram type</b> above) to the KNX bus
return msg;

``` **Envoyez la valeur brute au bus** Pour envoyer une valeur de tampon brute au bus KNX, utilisez les propri√©t√©s _ **writerraw** _ et _ **bitlenght** _ de l'entr√©e msg. 

Dans ce cas, le _datapoint_ que vous d√©finissez dans la fen√™tre de propri√©t√© sera ignor√©. 

Grapez un n≈ìud de fonction devant KNX-ultime et collez son code:

```javascript

// If you encode the values by yourself, you can write raw buffers with writeraw.
// The bitlenght is necessary for datapoint types where the bitlenght does not equal the buffers bytelenght * 8. This is the case for dpt 1 (bitlength 1), 2 (bitlenght 2) and 3 (bitlenght 4).
// Write raw buffer to a groupaddress with dpt 1 (e.g light on = value true = Buffer<01>) with a bitlength of 1
msg.writeraw = Buffer.from('01', 'hex'); // Put '00' instead of '01' to switch off the light.
msg.bitlenght = 1;
return msg;

// Temperature sample (uncomment below and comment above)
// Write raw buffer to a groupaddress with dpt 9 (e.g temperature 18.4 ¬∞C = Buffer<0730>) without bitlength
// msg.writeraw = Buffer.from('0730', 'hex');
// msg.bitlenght = 1;
// return msg;

``` **Mettez √† jour la valeur du n≈ìud sans l'envoyer au bus** ```javascript

msg.event = "Update_NoWrite";
msg.payload = true;
return msg;

```

## Contr√¥le des p√©riph√©riques KNX avec le n≈ìud r√©gl√© sur "Mode universel (√©coutez toutes les adresses de groupe)"

Ici, vous avez 2 options: Importer le fichier CVS ETS ou non. 

L'importation de votre fichier ETS est la m√©thode <b> Aboslute sugg√©r√©e </b>. Si vous importez votre fichier ETS, il vous suffit de d√©finir la charge utile pour √™tre transmise. Le n≈ìud fera automatiquement le codage de DataPoint. 

Si vous n'importez pas l'ETS CSV, vous devez √©galement passer le type de point de donn√©es au n≈ìud. **√âteignez une lampe <u> avec le fichier </u> ets import√©** ```javascript

// Example of a function that sends a message to the KNX-Ultimate
msg.event = "GroupValue_Write";
msg.destination = "0/0/1"; // Set the destination 
msg.payload = false; // issues a write or response (based on the options <b>Telegram type</b> above) to the KNX bus
return msg;

``` **√âteignez une lampe <u> sans </u> ets Fichier import√©** ```javascript

// Example of a function that sends a message to the KNX-Ultimate
msg.event = "GroupValue_Write";
msg.destination = "0/0/1"; // Set the destination 
msg.dpt = "1.001"; 
msg.payload = false; // issues a write or response (based on the options <b>Telegram type</b> above) to the KNX bus
return msg;

``` **Lisez l'√©tat de tous les p√©riph√©riques KNX <u> avec </u> ets Fichier import√©** Vous ne pouvez pas √©mettre une demande de lecture √† tous les groupes si vous n'importez pas votre fichier ETS, car le n≈ìud ne peut pas savoir sur les appareils pour envoyer la demande de lecture.

```javascript

// Example of a function that sends a read status message to the KNX-Ultimate
// Issues a read request to the KNX bus. You'll expect a 'response' from the bus. You need to select the **React to response telegrams** option.
// The node will react to the KNX Response telegram coming from the BUS.
msg.readstatus = true; // issues a write or response (based on the options <b>Telegram type</b> above) to the KNX bus
return msg;

```

## Voir aussi

- [Configuration de la passerelle](/node-red-contrib-knx-ultimate/wiki/gateway-configuration)
- [Protection des r√©f√©rences circulaires et protection contre les inondations](/node-red-contrib-knx-ultimate/wiki/protections)
- _Sample_
 - [√âchantillons](https://github.com/supergiovane/node-red-constrib-knx-ultimate/wiki/-samplehome)

 <Table Style = "Font-Size: 12px">
 <tr>
 <th Colspan = "2" style = "Font-Size: 14px"> Couleurs d'√©tat du n≈ìud Explication </th>
 </tr>
 <tr>
 <td> <img src = "https://raw.githubusercontent.com/supergiovane/node-red-contrib-knx-ultimate/master/img/greendot.png"> </ img> </ td>
 <TD> r√©agir aux t√©l√©grammes d'√©criture </td>
 </tr>
 <tr>
 <td> <img src = "https://raw.githubusercontent.com/supergiovane/node-red-contrib-knx-ultimate/master/img/greenring.png"> </ img> </ td>
 <TD> Protection de r√©f√©rence circulaire. <a href = "/node-red-contrib-knx-ultimate/wiki/Protections" Target = "_ Blank"> Voir cette page. </a> </ td>
 </tr>
 <tr>
<td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/bluedot.png" alt="Blue status dot" /></td>
 <TD> r√©agir aux t√©l√©grammes de r√©ponse. </td>
 </tr>
 <tr>
 <td> <img src = "https://raw.githubusercontent.com/supergiovane/node-red-contrib-knx-ultimate/master/img/bluering.png"> </img> </td>
 <TD> Auto Envoi de la valeur du n≈ìud comme r√©ponse au bus. <a href = "/node-red-contrib-knx-ultimate/wiki/-sample---virtual-device" cible = "_ Blank"> Voir le p√©riph√©rique virtuel. </a> </ td>
 </tr>
 <tr>
 <td> <img src = "https://raw.githubusercontent.com/supergiovane/node-red-contrib-knx-ultimate/master/img/greudot.png"> </ img> </ td>
 <TD> r√©agir aux t√©l√©grammes de lecture. </td>
 </tr>
 <tr>
 <td> <img src = "https://raw.githubusercontent.com/supergiovane/node-red-contrib-knx-ultimate/master/img/greyring.png"> </ img> </ td>
 <TD> Filtre RBE: aucun t√©l√©gramme n'a √©t√© envoy√©. </td>
 </tr>
 <tr>
 <td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/reddot.png" alt="Red status dot" /></td>
 <td> Erreur ou d√©connect√©. </td>
 </tr>
 <tr>
 <td><img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/redring.png" alt="Red status ring" /></td>
 <TD> Node d√©sactiv√© en raison d'une r√©f√©rence circulare. <a href = "/node-red-contrib-knx-ultimate/wiki/Protections" Target = "_ Blank"> Voir cette page. </a> </ td>
 </tr>
 </ table>
