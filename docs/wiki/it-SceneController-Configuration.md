üåê Language: [EN](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SceneController-Configuration) | [IT](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-SceneController-Configuration) | [DE](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/de-SceneController-Configuration) | [FR](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/fr-SceneController-Configuration) | [ES](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/es-SceneController-Configuration) | [ÁÆÄ‰Ωì‰∏≠Êñá](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/zh-CN-SceneController-Configuration)

<!-- NAV START -->
Navigazione: [Home](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Home)  
Panoramica: [Changelog](https://github.com/Supergiovane/node-red-contrib-knx-ultimate/blob/master/CHANGELOG.md) ‚Ä¢ [FAQ](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-FAQ-Troubleshoot) ‚Ä¢ [Sicurezza](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-SECURITY) ‚Ä¢ [Docs: Barra lingue](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Docs-Language-Bar)  
Nodo KNX Dispositivo: [Gateway](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Gateway-configuration) ‚Ä¢ [Dispositivo](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Device) ‚Ä¢ [Protezioni](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Protections)  
Altri Nodi KNX: [Scene Controller](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-SceneController-Configuration) ‚Ä¢ [WatchDog](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-WatchDog-Configuration) ‚Ä¢ [Logger](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Logger-Configuration) ‚Ä¢ [Global Context](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-GlobalVariable) ‚Ä¢ [Alerter](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Alerter-Configuration) ‚Ä¢ [Controllo Carico](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-LoadControl-Configuration) ‚Ä¢ [Viewer](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-knxUltimateViewer) ‚Ä¢ [Auto Responder](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-KNXAutoResponder) ‚Ä¢ [Traduttore HA](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HATranslator) ‚Ä¢ [IoT Bridge](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-IoT-Bridge-Configuration)  
HUE: [Bridge](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Bridge%20configuration) ‚Ä¢ [Luce](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Light) ‚Ä¢ [Batteria](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Battery) ‚Ä¢ [Pulsante](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Button) ‚Ä¢ [Contatto](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Contact%20sensor) ‚Ä¢ [Aggiornamento SW](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Device%20software%20update) ‚Ä¢ [Sensore Luce](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Light%20sensor) ‚Ä¢ [Movimento](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Motion) ‚Ä¢ [Scena](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Scene) ‚Ä¢ [Tap Dial](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Tapdial) ‚Ä¢ [Temperatura](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Temperature%20sensor) ‚Ä¢ [Connettivit√† Zigbee](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-HUE%20Zigbee%20connectivity)  
Esempi: [Logger](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/it-Logger-Sample) ‚Ä¢ [Switch Light](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Switch-light) ‚Ä¢ [Dimming](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Dimming) ‚Ä¢ [RGB color](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---RGB-Color) ‚Ä¢ [RGBW color + White](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---RGBW-Color-plus-White) ‚Ä¢ [Command a scene actuator](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Control-a-scene-actuator) ‚Ä¢ [Datapoint 213.x 4x Setpoint](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT213) ‚Ä¢ [Datapoint 222.x 3x Setpoint](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT222) ‚Ä¢ [Datapoint 237.x DALI diags](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT237) ‚Ä¢ [Datapoint 2.x 1 bit proprity](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT2) ‚Ä¢ [Datapoint 22.x RCHH Status](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DPT22) ‚Ä¢ [Datetime to BUS](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---DateTime-to-BUS) ‚Ä¢ [Read Status](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Read-value-from-Device) ‚Ä¢ [Virtual Device](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Virtual-Device) ‚Ä¢ [Subtype decoded](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Subtype) ‚Ä¢ [Alexa](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Alexa) ‚Ä¢ [Apple Homekit](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Apple-Homekit) ‚Ä¢ [Google Home](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---Google-Assistant) ‚Ä¢ [Switch on/off POE port of Unifi switch](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---UnifiPOE) ‚Ä¢ [Set configuration by msg](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample-setConfig) ‚Ä¢ [Scene Controller node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/Sample-Scene-Node) ‚Ä¢ [WatchDog node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/-Sample---WatchDog) ‚Ä¢ [Global Context node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SampleGlobalContextNode) ‚Ä¢ [Alerter node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SampleAlerter) ‚Ä¢ [Load control node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SampleLoadControl) ‚Ä¢ [Viewer node](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/knxUltimateViewer) ‚Ä¢ [MySQL, InfluxDB, MQTT Sample](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/Sample-KNX2MQTT-KNX2MySQL-KNX2InfluxDB)
<!-- NAV END -->

# Scene Controller

Il nodo Scene Controller si comporta come un dispositivo KNX di controllo scene: consente di salvare e richiamare una scena.

## Impostazioni del nodo

| Propriet√† | Descrizione |
|--|--|
| Gateway | Gateway KNX selezionato. |
| Scene Recall | **Datapoint ** e**Trigger Value** . Indirizzo di gruppo per il richiamo scena (es. `0/0/1`). Il nodo reagisce ai telegrammi ricevuti su questa GA richiamando la scena. Il Datapoint √® il DPT della GA di richiamo scena. Il Trigger Value √® il valore che deve essere ricevuto per attivare il richiamo. Ricorda: per richiamare/salvare una scena con un comando DIM, inserisci nel Trigger Value l'oggetto corretto di dimming (`{decr_incr:1,data:5}` per alzare, `{decr_incr:0,data:5}` per abbassare). |
| Scene Save | **Datapoint ** e**Trigger Value** . Indirizzo di gruppo per il salvataggio scena (es. `0/0/2`). Il nodo reagisce ai telegrammi ricevuti salvando i valori correnti di tutti i dispositivi della scena in memoria non volatile. Il Datapoint √® il DPT della GA di salvataggio. Il Trigger Value √® il valore che deve essere ricevuto per attivare il salvataggio. Ricorda: per richiamare/salvare una scena con DIM usa l'oggetto di dimming come sopra. |
| Node name | Nome nodo (puoi indicare ad es. "Recall: <dispositivo> / Save: <dispositivo>"). |
| Topic | Topic del nodo. |

## Configurazione scena

Aggiungi i dispositivi alla scena, come faresti con un vero controllore scene KNX. Ogni riga rappresenta un dispositivo.

La scena salva automaticamente i nuovi valori degli attuatori della lista non appena arrivano dal BUS.

| Propriet√† | Descrizione |
|--|--|
| Pulsante ADD | Aggiunge una riga. |
| Campi riga | 1) Indirizzo di gruppo 2) Datapoint 3) Valore di default per questo dispositivo nella scena (pu√≤ essere sovrascritto da Scene Save). Sotto, il nome del dispositivo.<br/> Per inserire una pausa, scrivi **wait ** nel primo campo e un numero nell'ultimo campo, che rappresenta la durata (millisecondi), ad es. `2000`.<br/> Il comando**wait** accetta anche secondi, minuti o ore: aggiungi `s` (es. `12s`), `m` (es. `5m`) o `h` (es. `1h`). |
| Pulsante Remove | Rimuove una riga/dispositivo. |

## Messaggi in uscita

```javascript
msg = {
  topic: "Scene Controller", // topic del nodo
  recallscene: true|false, // true se √® stata richiamata una scena
  savescene: true|false, // true se √® stata salvata una scena
  savevalue: true|false, // true se √® stato salvato manualmente il valore di una GA di un attuatore della scena
  disabled: true|false // true se il controller scena √® stato disabilitato via msg.disabled = true
}
```

---

## Messaggi di ingresso (INPUT)

Il nodo reagisce principalmente ai telegrammi KNX per richiamare/salvare le scene, ma puoi anche pilotarlo via msg. √à possibile disabilitare i comandi provenienti dal BUS KNX e usare solo quelli dal flow.

**Richiama una scena**

```javascript
msg.recallscene = true;
return msg;
```

**Salva una scena**

```javascript
msg.savescene = true;
return msg;
```

**Salva il valore corrente di una GA**

La scena salva gi√† automaticamente i valori aggiornati degli attuatori. A volte per√≤ √® utile salvare come "valore reale di scena‚Äù il valore attuale di una GA diversa da quella prevista in scena (es. usare una GA di stato al posto di una GA di comando).

Esempio: un attuatore tapparella ha GA di comando e GA di stato; il valore certo della posizione √® nella GA di stato "altezza assoluta‚Äù. Con questa GA puoi aggiornare le GA di comando degli attuatori presenti in scena.

```javascript
// Salva lo stato (ad es. 70%) di una tapparella appartenente alla scena
msg.savevalue = true;
msg.topic = "0/1/1"; // GA
msg.payload = 70; // valore da salvare
return msg;
```

**Disabilita il Scene Controller**

Disabilita i comandi dal BUS KNX (i msg dal flow restano accettati). Utile ad esempio di notte se non vuoi richiamare/salvare scene da pulsanti reali.

```javascript
msg.disabled = true; // false per riabilitare
return msg;
```

## Vedi anche

[Sample Scene Controller](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/Sample-Scene-Node)
