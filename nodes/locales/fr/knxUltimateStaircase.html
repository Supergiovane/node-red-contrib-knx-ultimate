<script type="text/markdown" data-help-name="knxUltimateStaircase">
# Temporisateur d'escalier KNX

<p>Le nœud Temporisateur d'escalier KNX reproduit le fonctionnement d'un éclairage de cage d'escalier. Il détecte les impulsions de déclenchement, pilote l'actionneur, reflète l'état via une GA de retour et gère les commandes d'override ou de blocage.</p>

**Adresses de groupe**

|Propriété|Description|
|--|--|
| GA impulsion | Entrée binaire qui démarre le minuteur lorsqu'elle reçoit `1`. Avec « La valeur 0 annule le cycle », un `0` éteint immédiatement l'éclairage. |
| GA sortie | Actionneur piloté pendant tout le cycle. Sélectionnez le DPT adapté au type de charge. |
| GA état | Reflète l'état actif et le préavis. En mode *Basculer la GA d'état* elle change brièvement avant l'extinction. |
| GA override | Maintient la lumière allumée et suspend le minuteur tant que la valeur reste à `1`. |
| GA blocage | Empêche les nouvelles impulsions lorsque la valeur vaut `1`. L'option *Lors du blocage* détermine si l'on force également l'arrêt. |

**Comportement du minuteur**

|Option|Description|
|--|--|
| Durée du minuteur | Durée de base du cycle d'escalier. |
| Nouvelle impulsion | Choisissez de redémarrer le minuteur, d'ajouter du temps restant ou d'ignorer l'impulsion. |
| La valeur 0 annule le cycle | Termine le cycle avec le motif `manual-off` quand l'impulsion repasse à `0`. |
| Lors du blocage | Définit si le blocage se contente d'interdire les impulsions ou force également l'arrêt. |

**Préavis**

|Option|Description|
|--|--|
| Envoyer un préavis | Active l'alerte avant l'extinction. |
| Préavis (secondes) | Nombre de secondes d'anticipation. |
| Mode de préavis | *Basculer la GA d'état* modifie temporairement la GA. *Faire clignoter la sortie* coupe puis rallume l'actionneur après la durée indiquée. |
| Durée du clignotement | Temps pendant lequel la sortie reste coupée lors du clignotement. |

**Sortie du nœud**

- Avec *Émettre des événements* activé, le nœud produit des objets structurés (`trigger`, `extend`, `prewarn`, `timeout`, `override`, `block`, `manual-off`) contenant `remaining`, `active`, `override`, `blocked`.
- Sinon utilisez la GA d'état comme retour d'information sur le bus KNX.

## Entrées

|Propriété|Description|
|--|--|
| Entrée du flow | Envoyez `true`, `false`, `'open'` ou `'close'` pour démarrer ou arrêter le minuteur. |
| Télégrammes KNX | Le nœud réagit aux adresses configurées. |

## Exemple de flow

```javascript
// Démarrer le temporisateur d'escalier
msg.payload = true;
return msg;
```

```javascript
// Annuler le cycle (option « La valeur 0 annule le cycle »)
msg.payload = false;
return msg;
```

## Sorties

|Propriété|Description|
|--|--|
| Événements (optionnel) | En mode événements, les objets décrits ci-dessus sont envoyés sur la sortie du nœud. |

</script>
