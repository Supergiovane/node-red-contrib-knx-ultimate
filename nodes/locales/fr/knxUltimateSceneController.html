<script type="text/markdown" data-help-name="knxUltimateSceneController">
<p> Le nœud de contrôle de la scène, se comporte exactement comme un périphérique de contrôleur de scène.Il est capable d'économiser et de rappeler une scène. </p>

# Paramètres de nœud de contrôleur de scène

|Propriété |Description |
|------------ |------------------------------------------------------------------------------------------------ |
|Passerelle |Gateway KNX sélectionné.|
|Rappel de scène | **DataPoint ** et**Valeur de déclenchement ** .Adresse du groupe pour le rappel de la scène.Exemple 0/0/1.Le contrôleur de scène réagira aux télégrammes provenant de cette adresse de groupe, pour rappeler la scène.Le point de données est le type de point de données (DPT) de l'adresse de groupe _Scène Rappel_.La valeur de déclenchement est la valeur qui doit être reçue, pour déclencher le rappel de la scène.**N'oubliez pas ** : Pour déclencher une scène ou enregistrer une scène via une commande DIM, mettez le rappel de scène ou la scène SAVE**Valeur de déclenchement** , l'objet correct pour l'amorçage ({diminution \ _incr: 1, Données: 5} pour une augmentation DIM, {diminution \ _incr: 0, données: 5} pour la diminution DIM) |
|Scene sauve | **DataPoint ** et**Valeur de déclenchement ** .Adresse du groupe pour enregistrer une scène.Exemple 0/0/2.Le contrôleur de scène réagira aux télégrammes provenant de cette adresse de groupe, en enregistrant toutes les valeurs actuelles de tous les appareils de la scène, qui peuvent être rappelées plus tard.Chaque fois que vous appuyez sur, ou appuyez longtemps sur un vrai bouton-poussoir KNX dans votre bâtiment, le contrôleur de scène lira les valeurs de tous les appareils de la scène et l'enregistrera dans un stockage non volatil.Le point de données est le type de point de données (DPT) de l'adresse de groupe _Scène Save_.La valeur de déclenchement est la valeur qui doit être reçue, pour déclencher l'enregistrement de la scène.**N'oubliez pas ** : Pour déclencher une scène ou enregistrer une scène via une commande DIM, mettez le rappel de scène ou la scène SAVE**Valeur de déclenchement** , l'objet correct pour l'amorçage ({diminution \ _incr: 1, Données: 5} pour une augmentation DIM, {diminution \ _incr: 0, données: 5} pour la diminution DIM) |
|Nom du nœud |Nom du nœud, dans le format "Rappel: nom de l'appareil utilisé pour rappeler la scène / enregistrer: nom de l'appareil pour enregistrer la scène".Mais vous pouvez définir le nom que vous voulez.|
|Sujet |Sujet de Node.|

Configuration de la scène ##

Vous devez ajouter des appareils à la scène, comme un appareil KNX de contrôleur de scène réel standard.Il s'agit d'une liste, chaque ligne représente un appareil.

_ **Le nœud de scène enregistre automatiquement les valeurs mises à jour de tous les actionneurs appartenant à la scène, chaque fois qu'il reçoit une nouvelle valeur du bus.** _

|Propriété |Description |
|------------- |------------------------------------------------------------------------------------------------ |
|Ajouter le bouton |Ajoutez une ligne à la liste.|
|Champ de la ligne |Le premier champ est l'adresse de groupe, la deuxième est le point de données, le troisième est la valeur par défaut de ce périphérique dans la scène (cela peut être remplacé par la fonction _Scene Save_).Ci-dessous, le nom du périphérique est ci-dessous.( **12s ** ) <br> Pour définir une valeur en minutes, ajoutez**m ** après la valeur numérique, par exemple (**5m ** ) <br> Pour définir une valeur en heures, ajoutez**h ** après la valeur numérique, par exemple (**1h** ) |
|Supprimer le bouton |Supprimer un appareil de la liste.|

# Sortie du message du nœud de contrôleur de scène

```javascript

msg = {
    topic: "Scene Controller" <i>(Contains the node's topic, for example "MyTopic").</i>
    recallscene: <i>(<b>true</b> if a scene has been recalled, otherwise <b>false</b>).</i> 
    savescene: <i>(<b>true</b> if a scene has been saved, otherwise <b>false</b>).</i> 
    savevalue: <i>(<b>true</b> if a group address value belonging to an actuator in the scene, has been manually saved by a msg input, otherwise <b>false</b>).</i> 
    disabled: <i>(<b>true</b> if the scene controller has been disabled via input message msg.disabled = true, otherwise <b>false</b>).</i> 
}

```

---

# Message de flux d'entrée

Le nœud de contrôleur de scène réagit primoramment aux télégrammes KNX et s'appuie à cela pour rappeler et sauver des scènes.

Vous pouvez cependant rappeler et enregistrer des scènes en envoyant un MSG au nœud.Le contrôleur de scène peut être désactivé pour inhiber les commandes provenant du bus KNX.

**Rappelez-vous une scène** 

```javascript

// Example of a function that recall the scene
msg.recallscene = true; 
return msg;

```

**Enregistrer une scène** 

```javascript

// Example of a function that saves the scene
msg.savescene = true; 
return msg;

```

**Enregistrer la valeur actuelle d'une adresse de groupe ** _**Le nœud de scène enregistre déjà les valeurs mises à jour de tous les actionneurs appartenant à la scène.** _

Parfois, il est utile de pouvoir enregistrer la valeur actuelle d'une adresse de groupe différente de celle entrée dans la scène, en tant que valeur réelle de l'actionneur de scène.

Par exemple, un actionneur d'obturation a généralement une adresse de groupe de commande et un statut.

Le nœud enregistre la scène en prenant des valeurs d'adresse de groupe de commande, qui peuvent ne pas être alignées sur la valeur de l'état réelle.

Cependant, vous pouvez contourner cela en mettant manuellement la valeur de l'adresse du groupe de commande, en le tirant de l'adresse du groupe d'état.

Pensez ceci: si vous avez un actionneur aveugle, ayant une adresse de groupe pour déplacer, une adresse de groupe pour Step, une adresse de groupe pour la hauteur absolue, etc.<br/>

Avec cette adresse de groupe d'état, vous pouvez mettre à jour les adresses de groupe de commandement des actionneurs aveugles appartenant à la scène.Veuillez consulter l'échantillon dans le wiki.

```javascript

// Example of a function that saves the status of a blind actuator, belongind to the scene.
msg.savevalue = true; 
msg.topic = "0/1/1";
msg.payload = 70;
return msg;

```

**Désactiver le contrôleur de scène**

Vous pouvez désactiver le contrôleur de scène (il désactive la réception de Telegram à partir du bus KNX mais le nœud accepte toujours le msg d'entrée du flux à la place).Il est parfois conseillé de désactiver le rappel et la sauvegarde d'une scène, par exemple, quand c'est la nuit et que vous appelez, à partir d'un bouton de poussée KNX, une "scène télévisée" qui soulève ou abaisse un aveugle, la scène ne sera pas rappelée ou sauvée.Au lieu de cela, vous pouvez activer une autre scène, juste pour la nuit, par exemple pour diminuer une série de lumières.

```javascript

// Example of disabling the scene controller. The commands coming from KNX BUS will be disabled. The node still accept the input msg from the flow instead!
msg.disabled = true; // Otherwise "msg.disabled = false" to re-enable the node.
return msg;

```

## Voir aussi

[Exemple de contrôleur de scène](https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/Sample-Scene-Node)
</script>
