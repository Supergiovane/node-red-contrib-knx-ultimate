<script type="text/markdown" data-help-name="knxUltimateStaircase">
# Temporizador de escalera KNX

<p>El nodo Temporizador de escalera KNX reproduce el funcionamiento clásico de una luz de escaleras: escucha los impulsos de activación, gobierna el actuador, refleja el estado en una GA de feedback y respeta los comandos de override o bloqueo.</p>

**Direcciones de grupo**

|Propiedad|Descripción|
|--|--|
| GA impulso | Entrada binaria que arranca el temporizador cuando recibe `1`. Si se habilita “El valor 0 cancela el ciclo”, un `0` apaga la luz de inmediato. |
| GA salida | Actuador que permanece activo mientras dura el ciclo. Selecciona el DPT adecuado al tipo de carga. |
| GA estado | Refleja el estado activo/preaviso. En modo *Conmutar GA estado* cambia brevemente antes del apagado. |
| GA override | Mantiene la luz encendida y pausa el temporizador mientras permanece en `1`. |
| GA bloqueo | Con `1` ignora nuevos impulsos. La opción *Cuando está bloqueado* permite decidir si se debe forzar el apagado. |

**Comportamiento del temporizador**

|Opción|Descripción|
|--|--|
| Duración del temporizador | Duración base del ciclo de escalera. |
| Nuevo impulso | Define si reiniciar el temporizador, prolongarlo o ignorar los impulsos adicionales. |
| El valor 0 cancela el ciclo | Termina el ciclo con motivo `manual-off` cuando el impulso vuelve a `0`. |
| Cuando está bloqueado | Decide si el bloqueo solo impide impulsos o también apaga la salida. |

**Preaviso**

|Opción|Descripción|
|--|--|
| Enviar preaviso | Activa la alerta previa al apagado. |
| Aviso (segundos) | Cuántos segundos antes lanzar el aviso. |
| Modo de aviso | *Conmutar GA estado* cambia temporalmente la GA de estado. *Parpadear la salida* apaga y vuelve a encender la salida tras la duración indicada. |
| Duración del parpadeo | Milisegundos que la salida permanece apagada durante el parpadeo. |

**Salida del nodo**

- Con *Emitir eventos* habilitado el nodo genera objetos estructurados (`trigger`, `extend`, `prewarn`, `timeout`, `override`, `block`, `manual-off`) con información de `remaining`, `active`, `override`, `blocked`.
- Si no emites eventos puedes usar la GA de estado como feedback en el bus KNX.

## Entradas

|Propiedad|Descripción|
|--|--|
| Entrada desde el flow | Envía `true`, `false`, `'open'` o `'close'` para iniciar o cancelar el temporizador. |
| Telegramas KNX | El nodo reacciona a las GA configuradas. |

## Ejemplo en el flow

```javascript
// Iniciar el temporizador de escalera
msg.payload = true;
return msg;
```

```javascript
// Cancelar el ciclo (requiere "El valor 0 cancela el ciclo")
msg.payload = false;
return msg;
```

## Salidas

|Propiedad|Descripción|
|--|--|
| Eventos (opcional) | Con eventos habilitados el nodo envía los objetos descritos anteriormente por la salida. |

</script>
