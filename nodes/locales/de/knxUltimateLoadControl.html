<script type="text/markdown" data-help-name="knxUltimateLoadControl">
# KNX Load Control Node

Mit dem Load-Control-Node schaltest du Lasten (Waschmaschine, Ofen usw.) automatisch ab, wenn der Verbrauch einen Schwellwert überschreitet.
Das Abschalten erfolgt intelligent: der mögliche Geräteverbrauch wird berücksichtigt, um zu entscheiden, ob gemeinsam mit anderen abgeschaltet wird.
Der Node kann Lasten automatisch wieder zuschalten.
Es wird jeweils ein Gerät (oder mehrere) in der konfigurierten Reihenfolge geschaltet.

**Allgemein**

|Eigenschaft|Beschreibung|
|--|--|
| Gateway | KNX-Gateway. Ohne Auswahl werden nur Eingangs-Nachrichten berücksichtigt. |
| Modus | _Automatisch (intern)_ nutzt Monitor W/Schwellwerte/Timer. _Manuell (msg.shedding)_ deaktiviert die interne Logik und verwendet nur `msg.shedding` (`shed`/`unshed`). |
| Monitor W | GA für den Gesamtverbrauch des Gebäudes. |
| Limit W | Maximaler Zähler/Vertragsschwellwert. Bei Überschreitung beginnt das Abschalten. |
| Ausschaltverzögerung (s) | Prüfintervall (Sekunden) zum Abschalten. |
| Einschaltverzögerung (s) | Prüfintervall (Sekunden) zum Wiederzuschalten. |

**Load Control**

Füge Geräte hinzu, die bei Überlast abgeschaltet werden sollen.
Wähle das Gerät über Name oder GA.
Optional: GA mit Geräteleistung angeben. Überschreitet die Leistung einen Grenzwert, gilt das Gerät als "in Benutzung". Bei geringem Verbrauch kann es zusammen mit dem nächsten abgeschaltet werden.
Ist "Automatische Wiederherstellung" aktiv, wird nach Ablauf des Reset-Delays wieder eingeschaltet.

## Inputs

|Eigenschaft|Beschreibung|
|--|--|
| `msg.readstatus = true` | Liest die aktuellen Watt-Werte aller gelisteten Geräte vom BUS (normalerweise automatisch). |
| `msg.enable = true` | Lastabwurf aktivieren. |
| `msg.disable = true` | Lastabwurf deaktivieren. |
| `msg.reset = true` | Node zurücksetzen und alle Geräte einschalten. |
| `msg.shedding` | String. In _Manuell_: `shed` schaltet die nächste Last aus, `unshed` stellt die vorherige wieder her. In _Automatisch_: `shed`/`unshed` erzwingt die interne Logik; `auto` stellt die normale Überwachung wieder her. |

## Outputs

1. Standardausgang: `payload (string|object)` mit dem Ergebnis.

## Details

```javascript

msg = {
  topic: "Home Total Consumption",
  operation: "Increase Shedding" | "Decrease Shedding" | "enable/disable/reset",
  device: "Washing machine",
  ga: "",
  totalPowerConsumption: 3100,
  wattLimit: 3000,
  payload: 1
}
```

# Beispiel

<a href="https://supergiovane.github.io/node-red-contrib-knx-ultimate/wiki/SampleLoadControl">HIER KLICKEN FÜR DAS BEISPIEL</a>
</script>
