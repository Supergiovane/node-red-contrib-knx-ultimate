<script type="text/javascript" src="resources/node-red-contrib-knx-ultimate/htmlUtils.js"></script>

<script type="text/javascript">
    RED.nodes.registerType('knxUltimateViewer', {
        category: "KNX Ultimate",
        color: '#C7E9C0',
        defaults: {
            //buttonState: {value: true},
            server: { type: "knxUltimate-config", required: true },
            name: { value: "KNXViewer", required: false }
        },
        inputs: 0,
        outputs: 3,
        outputLabels: function (i) {
            switch (i) {
                case 0:
                    return "Dashboard Group Addresses";
                    break;
                case 1:
                    return "Simple Array Json for data recording";
                    break;
                case 2:
                    return "Dashboard Telegrams queue";
                    break;
                default:
                    break;
            }
        },
        icon: "node-eye-icon.svg",
        label: function () {
            return (this.name);
        },
        paletteLabel: "KNX Viewer",
        // button: {
        //     enabled: function() {
        //         // return whether or not the button is enabled, based on the current
        //         // configuration of the node
        //         return !this.changed
        //     },
        //     visible: function() {
        //         // return whether or not the button is visible, based on the current
        //         // configuration of the node
        //         return this.hasButton
        //     },
        //     //toggle: "buttonState",
        //     onclick: function() {}
        // },
        oneditprepare: function () {


        },
        oneditsave: function () {


        },
        oneditcancel: function () {

        }
    })

</script>

<script type="text/html" data-template-name="knxUltimateViewer">


<div class="form-row">
    <b><span data-i18n="knxUltimateViewer.title"></span></b>&nbsp&nbsp<span style="color:red"
        data-i18n="[html]knxUltimateViewer.helplink"></span>
    <br />
    <label for="node-input-server">
        <img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKnRFWHRDcmVhdGlvbiBUaW1lAEZyIDYgQXVnIDIwMTAgMjE6NTI6MTkgKzAxMDD84aS8AAAAB3RJTUUH3gYYCicNV+4WIQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAACUSURBVHjaY2CgFZg5c+Z/ZEyWAZ8+f/6/ZsWs/xoamqMGkGrA6Wla/1+fVARjEBuGsSoGmY4eZSCNL59d/g8DIDbIAHR14OgFGQByKjIGKX5+6/T///8gGMQGiV1+/B0Fg70GIkD+RMYgxf/O5/7//2MSmAZhkBi6OrgB6Bg5DGB4ajr3f2xqsYYLSDE2THJUDg0AAAqyDVd4tp4YAAAAAElFTkSuQmCC"></img>
        <span data-i18n="knxUltimateViewer.advanced.node-input-server"></span>
    </label>
    <input type="text" id="node-input-server" />
</div>

<div class="form-row">
    <label for="node-input-name">
        <i class="fa fa-tag"></i>
        <span data-i18n="knxUltimateViewer.node-input-name"></span>
    </label>
    <input type="text" id="node-input-name" data-i18n="[placeholder]knxUltimateViewer.node-input-name" />
</div>



</script>

<script type="text/markdown" data-help-name="knxUltimateViewer">
View all group addresses and their values in a Dashboard widget, as well as JSON Oblect output and KNX transmission queue congestion.  

For all output pins marked as "Dashboard.. ", the node works in conjunction with the Node-Red dashboard UI Template node.


**General**
|Property|Description|
|--|--|
| KNX Gateway | The Gateway you wish to connect to. |
| Name | The node name |
|
<br/>

### Outputs PINS

1. Dashboard Group Addresses
: payload (html) : Connect it directly with the Template UI node. It creates a table with all Group Addresses and their values.
2. Simple Array JSON for data recording
: payload (array) : An array containing all the GA. You can use the array to do your own format and reordering.
2. Dashboard telegrams queue
: payload (html) : Connect it directly with the Template UI node. It creates a table with the KNX transmission queue for monitoring BUS congestion.

<br/>
<br/>

## SAMPLE

<img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/wiki/viewer2.png" width="90%"><br/>

In this example, you can see how the Viewer works.<br/>
Just put a Viewer node in your flow and attach a Template UI node behind it.<br/>
The **template** node (Dashboard's Template UI) contains the default text:<br/>
The Output is something as follows:<br/>

<img src="https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/wiki/viewer1.png" width="90%"><br/>

<br/>

[DONATE HERE, THANK YOU!](https://www.paypal.me/techtoday)

<br/>
</script>